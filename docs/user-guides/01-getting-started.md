# Getting Started with Playwright POM Generator

This guide will walk you through installing, building, and running the Playwright POM Generator for the first time.

## Prerequisites

Before you begin, ensure you have the following installed:

### Required
- **.NET 10.0 SDK** or later
  - Verify: `dotnet --version` (should show 10.0.x or higher)
  - Download: https://dotnet.microsoft.com/download

### Recommended
- **Git** for cloning the repository
- **Visual Studio 2022**, **Visual Studio Code**, or **JetBrains Rider** for development
- **Node.js and npm** (for Angular project testing)

## Installation

### Option 1: Build from Source

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd PageObjectModel
   ```

2. **Restore dependencies**
   ```bash
   dotnet restore PlaywrightPomGenerator.sln
   ```

3. **Build the solution**
   ```bash
   dotnet build PlaywrightPomGenerator.sln --configuration Release
   ```

4. **Verify the build**
   ```bash
   cd src\PlaywrightPomGenerator.Cli\bin\Release\net10.0
   .\PlaywrightPomGenerator.Cli.exe --help
   ```

### Option 2: Run from Source (Development)

For development or testing, you can run directly without building:

```bash
cd src\PlaywrightPomGenerator.Cli
dotnet run -- --help
```

## First Run

### Basic Test

Let's verify the installation works correctly:

```bash
# Show help to verify installation
playwright-pom-gen --help

# Expected output:
# Description:
#   Playwright Page Object Model Generator for Angular applications
#
# Usage:
#   PlaywrightPomGenerator.Cli [command] [options]
#
# Commands:
#   app            Generate Playwright Page Object Model tests for a single Angular application
#   workspace      Generate Playwright Page Object Model tests for an Angular workspace
#   artifacts      Generate specific Playwright artifacts
#   signalr-mock   Generate a fully functional SignalR mock fixture using RxJS
```

### Generate Your First POM

Let's create Page Object Models for a sample Angular application:

#### Scenario 1: Single Application

```bash
# Navigate to your Angular app directory
cd /path/to/your/angular-app

# Generate POMs with default settings
dotnet run --project /path/to/PlaywrightPomGenerator.Cli -- app . --output ./e2e

# Or if using the built executable:
playwright-pom-gen app . --output ./e2e
```

**What happens:**
1. The tool analyzes your Angular application
2. Discovers all components in the application
3. Generates Page Object Model files in the `./e2e` directory
4. Creates supporting files (fixtures, configs, helpers)

#### Scenario 2: Angular Workspace

```bash
# Navigate to your Angular workspace root
cd /path/to/your/angular-workspace

# Generate for entire workspace
playwright-pom-gen workspace . --output ./e2e-tests

# Or generate for a specific project
playwright-pom-gen workspace . --project my-app --output ./e2e-tests
```

#### Scenario 3: Only Specific Artifacts

```bash
# Generate only fixtures and configurations
playwright-pom-gen artifacts ./my-app --fixtures --configs --output ./tests

# Generate all artifacts at once
playwright-pom-gen artifacts ./my-app --all --output ./tests
```

## Understanding the Output

After running the generator, you'll see output like this:

```
info: PlaywrightPomGenerator.Cli.Commands.GenerateAppCommandHandler[0]
      Analyzing Angular application at /path/to/app
info: PlaywrightPomGenerator.Cli.Commands.GenerateAppCommandHandler[0]
      Found 15 components in MyApp
Successfully generated 32 files in /path/to/app/e2e

  - page-objects/home.page.ts
  - page-objects/login.page.ts
  - page-objects/dashboard.page.ts
  - fixtures/base.fixture.ts
  - playwright.config.ts
  - ...
```

### Output Directory Structure

```
e2e/
├── page-objects/          # Page Object Model classes
│   ├── home.page.ts
│   ├── login.page.ts
│   └── dashboard.page.ts
├── fixtures/              # Test fixtures
│   └── base.fixture.ts
├── selectors/             # Centralized selectors
│   └── app.selectors.ts
├── helpers/               # Utility functions
│   └── test.helpers.ts
├── tests/                 # Sample test files
│   ├── home.spec.ts
│   ├── login.spec.ts
│   └── dashboard.spec.ts
└── playwright.config.ts   # Playwright configuration
```

## Configuration Setup

### Create a Configuration File

Create an `appsettings.json` file in your project root or in the CLI directory:

```json
{
  "Generator": {
    "FileHeader": "/**\n * Auto-generated by PlaywrightPomGenerator\n * @date {GeneratedDate}\n */",
    "TestFileSuffix": "spec",
    "ToolVersion": "1.0.0",
    "OutputDirectoryName": "e2e",
    "GenerateJsDocComments": true,
    "DefaultTimeout": 30000,
    "BaseUrlPlaceholder": "http://localhost:4200"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "PlaywrightPomGenerator": "Information"
    }
  }
}
```

### Using Environment Variables

You can override configuration values using environment variables with the `POMGEN_` prefix:

**Windows (PowerShell):**
```powershell
$env:POMGEN_Generator__OutputDirectoryName = "tests"
$env:POMGEN_Generator__TestFileSuffix = "test"
playwright-pom-gen app ./src/my-app
```

**Linux/macOS (Bash):**
```bash
export POMGEN_Generator__OutputDirectoryName="tests"
export POMGEN_Generator__TestFileSuffix="test"
playwright-pom-gen app ./src/my-app
```

## Common First-Run Issues

### Issue 1: "Not a valid Angular application"

**Error:**
```
Error: '/path' is not a valid Angular application
```

**Solution:**
- Ensure you're pointing to a directory containing Angular application files
- For `app` command: Directory should contain Angular component files
- For `workspace` command: Directory should contain `angular.json`

### Issue 2: .NET SDK not found

**Error:**
```
The command 'dotnet' is not recognized...
```

**Solution:**
- Install .NET 10.0 SDK from https://dotnet.microsoft.com/download
- Restart your terminal after installation
- Verify: `dotnet --version`

### Issue 3: Permission Denied (Output Directory)

**Error:**
```
Access denied to output directory
```

**Solution:**
- Ensure you have write permissions to the output directory
- Try running with elevated permissions (if necessary)
- Specify a different output directory: `--output ./custom-output`

### Issue 4: No Components Found

**Warning:**
```
Found 0 components in MyApp
```

**Solution:**
- Verify your Angular application structure
- Check that component files follow Angular naming conventions (*.component.ts)
- Ensure TypeScript files are not in `node_modules` or excluded directories

## Next Steps

Now that you've successfully installed and run the generator:

1. **Learn the commands** - Read the specific command guides:
   - [Generate App Command](02-generate-app.md)
   - [Generate Workspace Command](03-generate-workspace.md)
   - [Generate Artifacts Command](04-generate-artifacts.md)

2. **Customize configuration** - See [Configuration Guide](06-configuration.md)

3. **Review generated files** - Understand the [Output Structure](08-output-structure.md)

4. **Integrate with CI/CD** - Check [Best Practices](10-best-practices.md)

## Quick Reference Commands

```bash
# Show help
playwright-pom-gen --help

# Generate for single app
playwright-pom-gen app <path> [--output <dir>]

# Generate for workspace
playwright-pom-gen workspace <path> [--project <name>] [--output <dir>]

# Generate specific artifacts
playwright-pom-gen artifacts <path> --fixtures --configs

# Generate SignalR mock
playwright-pom-gen signalr-mock <output>

# Use global options
playwright-pom-gen app . --header "// Custom Header" --test-suffix "test"
```

## Development Mode

If you're developing or contributing to the tool:

```bash
# Run from source
cd src\PlaywrightPomGenerator.Cli
dotnet run -- app /path/to/app

# Run tests
dotnet test

# Build in debug mode
dotnet build --configuration Debug

# Watch for changes (hot reload)
dotnet watch run -- app /path/to/app
```

## Getting Help

- Run `playwright-pom-gen --help` for general help
- Run `playwright-pom-gen <command> --help` for command-specific help
- Check [Troubleshooting Guide](09-troubleshooting.md) for common issues
- Review logs in console output (adjust logging level in appsettings.json)
