# Output Structure

This guide explains the structure and contents of files generated by the Playwright POM Generator.

## Overview

The generator creates a comprehensive test structure with these artifact types:
- Page Objects
- Fixtures
- Selectors
- Helpers
- Tests
- Configuration

## Default Directory Structure

### Single Application (`app` command)

```
e2e/
├── page-objects/          # Page Object Model classes
│   ├── home.page.ts
│   ├── login.page.ts
│   ├── dashboard.page.ts
│   └── ...
├── fixtures/              # Test fixtures
│   ├── base.fixture.ts
│   └── auth.fixture.ts
├── selectors/             # Centralized selectors
│   ├── app.selectors.ts
│   ├── home.selectors.ts
│   └── ...
├── helpers/               # Utility functions
│   ├── test.helpers.ts
│   └── assertions.ts
├── tests/                 # Sample test files
│   ├── home.spec.ts
│   ├── login.spec.ts
│   └── ...
└── playwright.config.ts   # Playwright configuration
```

### Workspace (`workspace` command)

```
<workspace-root>/
├── project-a/
│   └── e2e/              # Complete structure per project
│       ├── page-objects/
│       ├── fixtures/
│       ├── selectors/
│       ├── helpers/
│       ├── tests/
│       └── playwright.config.ts
├── project-b/
│   └── e2e/
│       └── ... (same structure)
└── angular.json
```

## File Type Details

### Page Objects (`page-objects/*.page.ts`)

**Purpose:** Encapsulate page interactions in reusable classes.

**Example:** `home.page.ts`
```typescript
import { Page, Locator } from '@playwright/test';
import { homeSelectors } from '../selectors/home.selectors';

/**
 * Page Object for Home component
 */
export class HomePage {
  readonly page: Page;
  readonly title: Locator;
  readonly loginButton: Locator;

  constructor(page: Page) {
    this.page = page;
    this.title = page.locator(homeSelectors.title);
    this.loginButton = page.locator(homeSelectors.loginButton);
  }

  /**
   * Navigate to the home page
   */
  async navigate() {
    await this.page.goto('/home');
  }

  /**
   * Click the login button
   */
  async clickLogin() {
    await this.loginButton.click();
  }

  /**
   * Get the page title text
   */
  async getTitleText(): Promise<string> {
    return await this.title.textContent() || '';
  }
}
```

**Naming Convention:** `<component-name>.page.ts`

**One per:** Angular component found in the application

### Fixtures (`fixtures/*.fixture.ts`)

**Purpose:** Shared test setup, teardown, and common test dependencies.

**Example:** `base.fixture.ts`
```typescript
import { test as base, expect } from '@playwright/test';
import { HomePage } from '../page-objects/home.page';
import { LoginPage } from '../page-objects/login.page';

type PageFixtures = {
  homePage: HomePage;
  loginPage: LoginPage;
};

export const test = base.extend<PageFixtures>({
  homePage: async ({ page }, use) => {
    const homePage = new HomePage(page);
    await use(homePage);
  },

  loginPage: async ({ page }, use) => {
    const loginPage = new LoginPage(page);
    await use(loginPage);
  },
});

export { expect };
```

**Example:** `auth.fixture.ts` (if authentication detected)
```typescript
import { test as base } from './base.fixture';

type AuthFixtures = {
  authenticatedPage: Page;
};

export const test = base.extend<AuthFixtures>({
  authenticatedPage: async ({ page, loginPage }, use) => {
    await loginPage.navigate();
    await loginPage.login('testuser', 'password');
    await use(page);
  },
});

export { expect } from '@playwright/test';
```

### Selectors (`selectors/*.selectors.ts`)

**Purpose:** Centralized element selectors for maintainability.

**Example:** `home.selectors.ts`
```typescript
/**
 * Selectors for Home component
 */
export const homeSelectors = {
  title: '[data-testid="home-title"]',
  subtitle: '[data-testid="home-subtitle"]',
  loginButton: '[data-testid="login-btn"]',
  signupLink: '[data-testid="signup-link"]',
  heroImage: 'img.hero-image',
  navigationMenu: 'nav.main-menu',
  footer: 'footer.page-footer',
} as const;
```

**Example:** `app.selectors.ts`
```typescript
/**
 * Application-wide selectors
 */
export const appSelectors = {
  header: 'header.app-header',
  mainContent: 'main.content',
  sidebar: 'aside.sidebar',
  loadingSpinner: '.loading-spinner',
  errorMessage: '.error-message',
  toast: '.toast-notification',
} as const;
```

**Benefits:**
- Single source of truth for selectors
- Easy to update when UI changes
- Type-safe with `as const`
- Reusable across page objects and tests

### Helpers (`helpers/*.helpers.ts`)

**Purpose:** Common utilities and helper functions for tests.

**Example:** `test.helpers.ts`
```typescript
import { Page } from '@playwright/test';

/**
 * Wait for Angular to be stable
 */
export async function waitForAngular(page: Page): Promise<void> {
  await page.evaluate(() => {
    return new Promise((resolve) => {
      if (window.getAllAngularTestabilities) {
        window.getAllAngularTestabilities().forEach((testability) => {
          testability.whenStable(resolve);
        });
      } else {
        resolve();
      }
    });
  });
}

/**
 * Take screenshot with timestamp
 */
export async function takeScreenshot(page: Page, name: string): Promise<void> {
  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
  await page.screenshot({ 
    path: `screenshots/${name}-${timestamp}.png`,
    fullPage: true 
  });
}

/**
 * Wait for API call to complete
 */
export async function waitForApiCall(
  page: Page, 
  url: string | RegExp
): Promise<void> {
  await page.waitForResponse((response) => {
    const responseUrl = response.url();
    return typeof url === 'string' 
      ? responseUrl.includes(url)
      : url.test(responseUrl);
  });
}
```

**Example:** `assertions.ts`
```typescript
import { expect, Locator } from '@playwright/test';

/**
 * Assert element is visible and has text
 */
export async function expectVisibleWithText(
  locator: Locator,
  text: string
): Promise<void> {
  await expect(locator).toBeVisible();
  await expect(locator).toHaveText(text);
}

/**
 * Assert element is enabled and clickable
 */
export async function expectClickable(locator: Locator): Promise<void> {
  await expect(locator).toBeVisible();
  await expect(locator).toBeEnabled();
}
```

### Tests (`tests/*.spec.ts` or `*.test.ts`)

**Purpose:** Sample test files demonstrating usage of page objects.

**Example:** `home.spec.ts`
```typescript
import { test, expect } from '../fixtures/base.fixture';

test.describe('Home Page', () => {
  test('should display the page title', async ({ homePage }) => {
    await homePage.navigate();
    const title = await homePage.getTitleText();
    expect(title).toBe('Welcome Home');
  });

  test('should navigate to login when button clicked', async ({ page, homePage }) => {
    await homePage.navigate();
    await homePage.clickLogin();
    await expect(page).toHaveURL(/\/login/);
  });

  test('should display hero image', async ({ homePage }) => {
    await homePage.navigate();
    await expect(homePage.heroImage).toBeVisible();
  });
});
```

**Note:** These are **sample tests** - they demonstrate the structure but may need customization for your application's actual behavior.

### Configuration (`playwright.config.ts`)

**Purpose:** Playwright test runner configuration.

**Example:**
```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests',
  
  timeout: 30000,
  
  expect: {
    timeout: 5000
  },

  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,

  reporter: 'html',

  use: {
    baseURL: 'http://localhost:4200',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],

  webServer: {
    command: 'npm start',
    url: 'http://localhost:4200',
    reuseExistingServer: !process.env.CI,
  },
});
```

## File Headers

All generated files can include a custom header (configured via `--header` option or `FileHeader` configuration):

**Example with header:**
```typescript
/**
 * @fileoverview home.page.ts
 * @generated Automatically generated by PlaywrightPomGenerator
 * @date 2026-02-04T02:35:48.703Z
 * @version 1.0.0
 *
 * DO NOT EDIT THIS FILE DIRECTLY.
 * Any changes will be overwritten when the generator is run again.
 */

import { Page } from '@playwright/test';
// ... rest of file
```

## Naming Conventions

### Files
- Page Objects: `<component-name>.page.ts`
- Tests: `<component-name>.spec.ts` (or `.test.ts` with `--test-suffix`)
- Selectors: `<component-name>.selectors.ts`
- Fixtures: `<purpose>.fixture.ts`
- Helpers: `<purpose>.helpers.ts`

### Classes
- Page Objects: `<ComponentName>Page`
- Example: `HomePage`, `LoginPage`, `DashboardPage`

### Functions
- Page Object methods: camelCase (`navigate()`, `clickLogin()`, `getTitleText()`)
- Helper functions: camelCase (`waitForAngular()`, `takeScreenshot()`)

## Customization

### Output Directory

Change via `--output` option or `OutputDirectoryName` configuration:

```bash
playwright-pom-gen app . --output ./playwright-tests
```

**Result:**
```
playwright-tests/
├── page-objects/
├── fixtures/
└── ...
```

### Test File Suffix

Change via `--test-suffix` option or `TestFileSuffix` configuration:

```bash
playwright-pom-gen app . --test-suffix "test"
```

**Result:**
```
tests/
├── home.test.ts       # Instead of home.spec.ts
├── login.test.ts
└── ...
```

## Best Practices

### 1. Don't Modify Generated Files Directly

Generated files are overwritten on regeneration. Instead:
- Extend generated page objects
- Wrap generated fixtures
- Add custom helpers separately

### 2. Organize Custom Code

```
e2e/
├── page-objects/      # Generated
├── custom-pages/      # Your extensions
├── fixtures/          # Generated
├── custom-fixtures/   # Your additions
└── ...
```

### 3. Version Control

**Commit:**
- Generated structure (demonstrates project state)
- Custom extensions and utilities

**Ignore (optional):**
- Add `e2e/` to `.gitignore` if you prefer to regenerate

## Next Steps

- Learn [Best Practices](10-best-practices.md) for working with generated files
- Review [Configuration](06-configuration.md) to customize output
- Check [Troubleshooting](09-troubleshooting.md) for common issues
